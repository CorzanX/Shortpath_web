{"ast":null,"code":"// graphUtils.js\n\n// 引入d3.js库\nimport * as d3 from 'd3';\n\n// 定义initGraph函数\nexport function initGraph(container, nodes, links) {\n  // 初始化力导向图\n  const simulation = d3.forceSimulation(nodes).force('link', d3.forceLink(links).id(d => d.id)).force('charge', d3.forceManyBody()).force('center', d3.forceCenter(150, 150));\n\n  // 创建SVG画布\n  const svg = d3.select(container).append('svg');\n\n  // 创建链接\n  const link = svg.selectAll('.link').data(links).enter().append('line').attr('class', 'link');\n\n  // 创建节点\n  const node = svg.selectAll('.node').data(nodes).enter().append('circle').attr('class', 'node').attr('r', 20).call(d3.drag().on('start', dragstart).on('drag', dragged).on('end', dragend));\n  const label = svg.selectAll(null).data(nodes).enter().append(\"text\").attr(\"text-anchor\", \"middle\").attr(\"font-size\", \"12px\").attr(\"dy\", \"-1.5em\").text(d => d.name);\n  // 设置节点和链接的属性\n  link.attr('stroke', '#ccc').attr('stroke-width', 1);\n  node.attr('fill', 'steelblue');\n\n  // 定义节点拖拽的回调函数\n  function dragstart(d) {\n    if (!d3.event.active) {\n      simulation.alphaTarget(0.3).restart();\n    }\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n  function dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  }\n  function dragend(d) {\n    if (!d3.event.active) {\n      simulation.alphaTarget(0);\n    }\n    d.fx = null;\n    d.fy = null;\n  }\n\n  // 更新节点和链接的位置\n  simulation.on('tick', () => {\n    link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);\n    node.attr('cx', d => d.x).attr('cy', d => d.y);\n  });\n}","map":{"version":3,"names":["d3","initGraph","container","nodes","links","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","forceCenter","svg","select","append","link","selectAll","data","enter","attr","node","call","drag","on","dragstart","dragged","dragend","label","text","name","event","active","alphaTarget","restart","fx","x","fy","y","source","target"],"sources":["/Users/corzanx77/Desktop/Vue代码/router-demo/src/static/orientd.js"],"sourcesContent":["// graphUtils.js\n\n// 引入d3.js库\nimport * as d3 from 'd3';\n\n// 定义initGraph函数\nexport function initGraph(container, nodes, links) {\n  // 初始化力导向图\n  const simulation = d3.forceSimulation(nodes)\n    .force('link', d3.forceLink(links).id(d => d.id))\n    .force('charge', d3.forceManyBody())\n    .force('center', d3.forceCenter(150 , 150));\n\n  // 创建SVG画布\n  const svg = d3.select(container)\n    .append('svg')\n\n  // 创建链接\n  const link = svg.selectAll('.link')\n    .data(links)\n    .enter()\n    .append('line')\n    .attr('class', 'link');\n\n  // 创建节点\n  const node = svg.selectAll('.node')\n    .data(nodes)\n    .enter()\n    .append('circle')\n    .attr('class', 'node')\n    .attr('r', 20)\n    .call(d3.drag()\n      .on('start', dragstart)\n      .on('drag', dragged)\n      .on('end', dragend));\n\n    const label = svg\n      .selectAll(null)\n      .data(nodes)\n      .enter()\n      .append(\"text\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"font-size\", \"12px\")\n      .attr(\"dy\", \"-1.5em\")\n      .text((d) => d.name);\n  // 设置节点和链接的属性\n  link.attr('stroke', '#ccc')\n    .attr('stroke-width', 1);\n\n  node.attr('fill', 'steelblue');\n  \n\n  // 定义节点拖拽的回调函数\n  function dragstart(d) {\n    if (!d3.event.active) {\n      simulation.alphaTarget(0.3).restart();\n    }\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n\n  function dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  }\n\n  function dragend(d) {\n    if (!d3.event.active) {\n      simulation.alphaTarget(0);\n    }\n    d.fx = null;\n    d.fy = null;\n  }\n\n  // 更新节点和链接的位置\n  simulation.on('tick', () => {\n    link.attr('x1', d => d.source.x)\n      .attr('y1', d => d.source.y)\n      .attr('x2', d => d.target.x)\n      .attr('y2', d => d.target.y);\n\n    node.attr('cx', d => d.x)\n      .attr('cy', d => d.y);\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}