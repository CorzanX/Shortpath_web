{"ast":null,"code":"import * as d3 from \"d3\";\nexport default {\n  props: {\n    nodes: {\n      type: Array,\n      required: true\n    },\n    links: {\n      type: Array,\n      required: true\n    },\n    parentWidth: Number,\n    parentHeight: Number\n  },\n  mounted() {\n    this.drawGraph();\n  },\n  methods: {\n    drawGraph() {\n      const simulation = d3.forceSimulation(this.nodes).force(\"link\", d3.forceLink(this.links).id(function (d) {\n        return d.id;\n      })).force(\"charge\", d3.forceManyBody().strength(-500)).force(\"center\", d3.forceCenter(this.parentWidth / 2, this.parentHeight / 2));\n      const link = svg.append(\"g\").selectAll(\"line\").data(this.links).enter().append(\"line\").attr(\"class\", \"link\").attr(\"stroke\", \"#999\").style(\"stroke-width\", \"2px\");\n      ;\n      const node = svg.append(\"g\").selectAll(\"circle\").data(this.nodes).enter().append(\"circle\").attr(\"class\", \"node\").attr(\"r\", 20).attr(\"fill\", \"lightblue\");\n\n      //.style(\"fill\", \"#66ccff\") // 设置节点的填充颜色\n      //.style(\"stroke\", \"#fff\") // 设置节点的边框颜色\n      //.style(\"stroke-width\", \"0.1px\"); // 设置节点的边框宽度\n\n      function update() {\n        node.attr(\"cx\", function (d) {\n          return d.x;\n        }).attr(\"cy\", function (d) {\n          return d.y;\n        });\n        link.attr(\"x1\", function (d) {\n          return d.source.x;\n        }).attr(\"y1\", function (d) {\n          return d.source.y;\n        }).attr(\"x2\", function (d) {\n          return d.target.x;\n        }).attr(\"y2\", function (d) {\n          return d.target.y;\n        });\n      }\n      simulation.nodes(nodes).on(\"tick\", update);\n      simulation.force(\"link\").links(links);\n      svg.append(\"defs\").append(\"marker\").attr(\"id\", \"arrow\").attr(\"viewBox\", \"0 -5 10 10\").attr(\"refX\", 20).attr(\"refY\", 0).attr(\"markerWidth\", 6).attr(\"markerHeight\", 6).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M0,-5L10,0L0,5\").attr(\"class\", \"arrow\");\n      link.attr(\"marker-end\", \"url(#arrow)\");\n    }\n  }\n};","map":{"version":3,"names":["d3","props","nodes","type","Array","required","links","parentWidth","Number","parentHeight","mounted","drawGraph","methods","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","strength","forceCenter","link","svg","append","selectAll","data","enter","attr","style","node","update","x","y","source","target","on"],"sources":["src/components/oriented.vue"],"sourcesContent":["<template>\n  <div>\n    <svg ref=\"svg\" :width=\"parentWidth\" :height=\"parentHeight\"></svg>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\n\nexport default {\n  props: {\n    nodes: {\n      type: Array,\n      required: true,\n    },\n    links: {\n      type: Array,\n      required: true,\n    },\n    parentWidth: Number,\n    parentHeight: Number,\n  },\n  mounted() {\n    this.drawGraph();\n  },\n  methods: {\n    drawGraph() {\n\n      const simulation = d3.forceSimulation(this.nodes)\n        .force(\"link\", d3.forceLink(this.links).id(function(d) { return d.id; }))\n        .force(\"charge\", d3.forceManyBody().strength(-500))\n        .force(\"center\", d3.forceCenter(this.parentWidth / 2, this.parentHeight / 2));\n\n      \n\n      const link = svg.append(\"g\")\n        .selectAll(\"line\")\n        .data(this.links)\n        .enter().append(\"line\")\n        .attr(\"class\", \"link\")\n        .attr(\"stroke\", \"#999\")\n        .style(\"stroke-width\", \"2px\");;\n      const node = svg.append(\"g\")\n        .selectAll(\"circle\")\n        .data(this.nodes)\n        .enter().append(\"circle\")\n        .attr(\"class\", \"node\")\n        .attr(\"r\", 20)\n        .attr(\"fill\", \"lightblue\");\n        \n        //.style(\"fill\", \"#66ccff\") // 设置节点的填充颜色\n        //.style(\"stroke\", \"#fff\") // 设置节点的边框颜色\n        //.style(\"stroke-width\", \"0.1px\"); // 设置节点的边框宽度\n\n      function update() {\n        node.attr(\"cx\", function(d) { return d.x; })\n          .attr(\"cy\", function(d) { return d.y; });\n\n        link.attr(\"x1\", function(d) { return d.source.x; })\n          .attr(\"y1\", function(d) { return d.source.y; })\n          .attr(\"x2\", function(d) { return d.target.x; })\n          .attr(\"y2\", function(d) { return d.target.y; });\n      }\n\n      simulation.nodes(nodes).on(\"tick\", update);\n      simulation.force(\"link\").links(links);\n\n      svg.append(\"defs\").append(\"marker\")\n        .attr(\"id\", \"arrow\")\n        .attr(\"viewBox\", \"0 -5 10 10\")\n        .attr(\"refX\", 20)\n        .attr(\"refY\", 0)\n        .attr(\"markerWidth\", 6)\n        .attr(\"markerHeight\", 6)\n        .attr(\"orient\", \"auto\")\n        .append(\"path\")\n        .attr(\"d\", \"M0,-5L10,0L0,5\")\n        .attr(\"class\", \"arrow\");\n\n      link.attr(\"marker-end\", \"url(#arrow)\");\n    }\n  }\n};\n</script>\n"],"mappings":"AAOA,YAAAA,EAAA;AAEA;EACAC,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,KAAA;MACAC,QAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAC,KAAA;MACAC,QAAA;IACA;IACAE,WAAA,EAAAC,MAAA;IACAC,YAAA,EAAAD;EACA;EACAE,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,OAAA;IACAD,UAAA;MAEA,MAAAE,UAAA,GAAAb,EAAA,CAAAc,eAAA,MAAAZ,KAAA,EACAa,KAAA,SAAAf,EAAA,CAAAgB,SAAA,MAAAV,KAAA,EAAAW,EAAA,WAAAC,CAAA;QAAA,OAAAA,CAAA,CAAAD,EAAA;MAAA,IACAF,KAAA,WAAAf,EAAA,CAAAmB,aAAA,GAAAC,QAAA,QACAL,KAAA,WAAAf,EAAA,CAAAqB,WAAA,MAAAd,WAAA,WAAAE,YAAA;MAIA,MAAAa,IAAA,GAAAC,GAAA,CAAAC,MAAA,MACAC,SAAA,SACAC,IAAA,MAAApB,KAAA,EACAqB,KAAA,GAAAH,MAAA,SACAI,IAAA,kBACAA,IAAA,mBACAC,KAAA;MAAA;MACA,MAAAC,IAAA,GAAAP,GAAA,CAAAC,MAAA,MACAC,SAAA,WACAC,IAAA,MAAAxB,KAAA,EACAyB,KAAA,GAAAH,MAAA,WACAI,IAAA,kBACAA,IAAA,UACAA,IAAA;;MAEA;MACA;MACA;;MAEA,SAAAG,OAAA;QACAD,IAAA,CAAAF,IAAA,iBAAAV,CAAA;UAAA,OAAAA,CAAA,CAAAc,CAAA;QAAA,GACAJ,IAAA,iBAAAV,CAAA;UAAA,OAAAA,CAAA,CAAAe,CAAA;QAAA;QAEAX,IAAA,CAAAM,IAAA,iBAAAV,CAAA;UAAA,OAAAA,CAAA,CAAAgB,MAAA,CAAAF,CAAA;QAAA,GACAJ,IAAA,iBAAAV,CAAA;UAAA,OAAAA,CAAA,CAAAgB,MAAA,CAAAD,CAAA;QAAA,GACAL,IAAA,iBAAAV,CAAA;UAAA,OAAAA,CAAA,CAAAiB,MAAA,CAAAH,CAAA;QAAA,GACAJ,IAAA,iBAAAV,CAAA;UAAA,OAAAA,CAAA,CAAAiB,MAAA,CAAAF,CAAA;QAAA;MACA;MAEApB,UAAA,CAAAX,KAAA,CAAAA,KAAA,EAAAkC,EAAA,SAAAL,MAAA;MACAlB,UAAA,CAAAE,KAAA,SAAAT,KAAA,CAAAA,KAAA;MAEAiB,GAAA,CAAAC,MAAA,SAAAA,MAAA,WACAI,IAAA,gBACAA,IAAA,0BACAA,IAAA,aACAA,IAAA,YACAA,IAAA,mBACAA,IAAA,oBACAA,IAAA,mBACAJ,MAAA,SACAI,IAAA,wBACAA,IAAA;MAEAN,IAAA,CAAAM,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}