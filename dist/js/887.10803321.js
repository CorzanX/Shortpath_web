"use strict";(self["webpackChunkrouter_demo"]=self["webpackChunkrouter_demo"]||[]).push([[887],{7298:function(t,e,r){r.r(e),r.d(e,{default:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("Please upload the txt file in this format")]),e("h1",[t._v("example")]),t._m(0),e("el-upload",{staticClass:"upload-demo",attrs:{action:"http://120.26.196.251:8088/cmp","on-success":t.handleSuccess,"before-upload":t.beforeUpload}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("upload")]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("Only txt files can be uploaded and should not exceed 500kb")])],1),t.txtData?e("div",[1===t.flag?e("div",[e("undirected_graph",{attrs:{parentHeight:400,parentWidth:400,links:t.links,nodes:t.nodes}})],1):e("div",[e("directed_graph",{attrs:{links:t.links,nodes:t.nodes}})],1),e("h1",[t._v("Adjacency Matrix")]),e("p",{staticStyle:{"white-space":"pre-wrap","font-family":"Courier New"}},[t._v(t._s(t.txtData))]),e("div",[e("el-input",{attrs:{placeholder:"Please enter a starting point"},model:{value:t.input_start,callback:function(e){t.input_start=e},expression:"input_start"}}),e("el-input",{attrs:{placeholder:"Please enter an end point"},model:{value:t.input_end,callback:function(e){t.input_end=e},expression:"input_end"}}),e("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("Submit")])],1),t.stp?e("div",[e("p",{staticStyle:{"white-space":"pre-wrap"}},[t._v("The shortest path from "+t._s(t.input_start)+" to "+t._s(t.input_end)+" is "+t._s(t.stp))])]):t._e()]):t._e()],1)},n=[function(){var t=this,e=t._self._c;return e("p",[t._v(" directed"),e("br"),t._v(" vertex a"),e("br"),t._v(" vertex b"),e("br"),t._v(" vertex c"),e("br"),t._v(" vertex d"),e("br"),t._v(" edge a b 24"),e("br"),t._v(" edge b d 2"),e("br"),t._v(" edge c b 6"),e("br"),t._v(" edge d c 11"),e("br")])}],i=r(8488),s=r(9791),l={components:{undirected_graph:i.Z,directed_graph:s.Z},data(){return{txtData:"",nodes:[],links:[],input_start:"",input_end:"",stp:"",flag:-1}},methods:{beforeUpload(t){const e="text/plain"===t.type;return e||this.$message.error("只能上传txt文件"),e},handleSuccess(t,e){const r=t;if(!r)return this.nodes=[],void(this.links=[]);this.nodes=Object.values(r.nodes).map((t=>({id:t.id,name:t.name}))),this.links=Object.values(r.links).map((t=>({source:t.source,target:t.target,weight:t.weight}))),this.txtData=r.adjacencyMatrixString,this.flag=r.flag},handleSubmit(){const t=new FormData;t.append("input_start",this.input_start),t.append("input_end",this.input_end),this.$http.post("/getstp",t,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{this.stp=t.data,console.log(t)})).catch((t=>{console.error(t)}))}}},d=l,o=r(1001),p=(0,o.Z)(d,a,n,!1,null,null,null),c=p.exports},9791:function(t,e,r){r.d(e,{Z:function(){return p}});var a=function(){var t=this,e=t._self._c;return e("div",[e("svg",{ref:"graph",attrs:{width:"200",height:"200"}})])},n=[],i=r(4592),s={props:{nodes:{type:Array,required:!0},links:{type:Array,required:!0}},mounted(){this.drawGraph()},methods:{drawGraph(){const t=i.Ys(this.$refs.graph),e=i.A4v().force("link",i.Fsl().id((function(t){return t.id}))).force("charge",i.q5i().strength(-500)).force("center",i.wqt(t.attr("width")/2,t.attr("height")/2)),r=t.append("g").selectAll("line").data(this.links).enter().append("line").attr("class","link").attr("stroke","#999").style("stroke-width","2px"),a=t.append("g").selectAll("circle").data(this.nodes).enter().append("circle").attr("class","node").attr("r",15).attr("fill","lightblue").call(i.ohM().on("start",d).on("drag",o).on("end",p)),n=t.append("g").selectAll(null).data(this.nodes).enter().append("text").attr("text-anchor","middle").attr("font-size","12px").attr("dy","-0em").text((t=>t.name)),s=t.append("g").selectAll(null).data(this.links).enter().append("text").attr("text-anchor","middle").attr("font-size","12px").attr("dy","-0.5em").text((t=>t.weight));function l(){a.attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),r.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),n.attr("x",(t=>t.x)).attr("y",(t=>t.y)),s.attr("x",(t=>.3*t.source.x+.7*t.target.x)).attr("y",(t=>.3*t.source.y+.7*t.target.y))}function d(t){i.Ba6.active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function o(t){t.x=i.Ba6.x,t.y=i.Ba6.y}function p(t){i.Ba6.active||e.alphaTarget(0),t.fx=null,t.fy=null}e.nodes(this.nodes).on("tick",l),e.force("link").links(this.links),t.append("defs").append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("class","arrow"),r.attr("marker-end","url(#arrow)")}}},l=s,d=r(1001),o=(0,d.Z)(l,a,n,!1,null,null,null),p=o.exports},8488:function(t,e,r){r.d(e,{Z:function(){return p}});var a=function(){var t=this,e=t._self._c;return e("div",[e("svg",{ref:"svg",attrs:{width:t.parentWidth,height:t.parentHeight}})])},n=[],i=r(4592),s={name:"undirected_graph",props:{nodes:{type:Array,required:!0},links:{type:Array,required:!0},parentWidth:Number,parentHeight:Number},mounted(){this.initGraph()},methods:{initGraph(){this.simulation=i.A4v(this.nodes).force("link",i.Fsl(this.links).id((t=>t.id))).force("charge",i.q5i().strength(-500)).force("center",i.wqt(this.parentWidth/2,this.parentHeight/2));const t=i.Ys(this.$refs.svg);this.link=t.selectAll("line").data(this.links).enter().append("line").attr("stroke","#999"),this.node=t.selectAll("circle").data(this.nodes).enter().append("circle").attr("r",20).attr("fill","lightblue").call(i.ohM().on("start",this.dragstart).on("drag",this.dragged).on("end",this.dragend)),this.label=t.selectAll(null).data(this.nodes).enter().append("text").attr("text-anchor","middle").attr("font-size","12px").attr("dy","-0em").text((t=>t.name)),this.weight_label=t.selectAll(null).data(this.links).enter().append("text").attr("text-anchor","middle").attr("font-size","12px").attr("dy","-0em").text((t=>t.weight)),this.simulation.nodes(this.nodes).on("tick",this.ticked),this.simulation.force("link").links(this.links)},ticked(){this.link.attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y)),this.node.attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),this.label.attr("x",(t=>t.x)).attr("y",(t=>t.y)),this.weight_label.attr("x",(t=>(t.source.x+t.target.x)/2)).attr("y",(t=>(t.source.y+t.target.y)/2))},dragstart(t){i.Ba6.active||this.simulation.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y},dragged(t){t.x=i.Ba6.x,t.y=i.Ba6.y},dragend(t){i.Ba6.active||this.simulation.alphaTarget(0),t.fx=null,t.fy=null}}},l=s,d=r(1001),o=(0,d.Z)(l,a,n,!1,null,null,null),p=o.exports}}]);
//# sourceMappingURL=887.10803321.js.map